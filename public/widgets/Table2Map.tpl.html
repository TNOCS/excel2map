<div class="all-widget-content fill-height">
    <div class="fixed-widget-header">
        <!-- <div style="display: inline-block; margin-left: 2px;" ng-hide="data.hideTitle">
            <div style="display: inline-block; font-size:16px; font-weight:bold; margin-bottom:2px;">{{data.title}}</div>
            <div style="display: inline-block; margin-right:5px; position: absolute; top: 2px; right: 0px;">
                <a class="widget-min-max-close" ng-click="vm.t2mSvc.close()" ng-if="vm.t2mSvc.canClose()"><i class="fa fa-times"></i></a>
                <a class="widget-min-max-close" ng-click="vm.t2mSvc.minimize()" ng-show="vm.t2mSvc.canMinimize() && minimized"> <i class="fa fa-plus"></i></a>
                <a class="widget-min-max-close" ng-click="vm.t2mSvc.minimize()" ng-show="vm.t2mSvc.canMinimize() && !minimized"> <i class="fa fa-minus"></i></a>
                <a class="widget-min-max-close" ng-click="vm.t2mSvc.exportToPDF()"><i class="fa fa-save" uib-tooltip="{{'SAVE_AS_PDF' | translate}}" ng-show="vm.t2mSvc.exporterAvailable&&!minimized"></i></a>
            </div>
        </div> -->
        <!--<div class="row text-center no-margin">
            <ul uib-pagination ng-model="vm.t2mSvc.currentStep" total-items="vm.t2mSvc.numberOfSteps" items-per-page="1" previous-text="{{'PREVIOUS_STEP' | translate}}"
                next-text="{{'NEXT_STEP' | translate}}" ng-disabled="(dropBox.$invalid||loadProjectForm.$invalid||projectSettingsForm.$invalid||LayerSettingsOldForm.$invalid)"></ul>
            <ul ng-show="vm.t2mSvc.rowCollection.length > 0" class="pagination pointer" aria-hidden="true" uib-tooltip="{{'SHOW_TABLE' | translate}}"
                tooltip-placement="bottom" style="margin-left: 32px;">
                <li>
                    <a class="fa fa-table" style="text-transform: uppercase;" ng-click="vm.t2mSvc.openTable('none', 0)"><span class="small-padding-left">{{'TABLE_LABEL' | translate}}</span></a>
                </li>
            </ul>
        </div>-->

        <div class="row no-margin">
                <div class="wizard-title">Nieuw project aanmaken  > {{vm.t2mSvc.currentStep}}. {{vm.t2mSvc.conversionSteps[vm.t2mSvc.currentStep - 1]}}
                <span ng-show="vm.t2mSvc.rowCollection.length > 0">
                    <div style="margin-left: 64px;display: inline" uib-tooltip="{{'SHOW_TABLE' | translate}}"
                    tooltip-placement="bottom">
                        <a ng-click="vm.t2mSvc.openTable('none', 0)" style="border-radius: 0.25em;">
                            <i class="fa fa-table"></i>
                            <span class="small-padding-left">{{'TABLE_LABEL' | translate}}</span>
                        </a>
                    </div>
                </span>
                <span class="larger-font small-padding pull-right pointer" uib-tooltip="{{'EXIT_WIZARD' | translate}}" tooltip-placement="left" ng-click="vm.closeWizard()"><i class="fa fa-times"></i></span>
                <span class="larger-font small-padding pull-right pointer" style="margin-right:24px" ng-show="vm.t2mSvc.notFoundLocations" uib-tooltip="{{'DATA_NOT_CONVERTED_CORRECTLY' | translate}}" tooltip-placement="left" ng-click="vm.showMissingLocations()"><i class="fa fa-exclamation-triangle"></i></span>
            </div>
        </div> 
    </div>
    <div class="row" style="margin: 0px">
        <div class="col-sm-4 col-md-3 col-lg-2">
            <ul class="SteppedProgress Vertical">
                <li ng-repeat="step in vm.t2mSvc.conversionSteps track by $index" ng-class="{'complete': vm.t2mSvc.currentStep >= $index + 1}">
                    <a ng-click="vm.t2mSvc.currentStep = $index + 1" ng-disabled="(dropBox.$invalid||projectSettingsForm.$invalid||LayerSettingsOldForm.$invalid)">{{step}}</a>
                </li>
            </ul>
            <!-- <ul class="cd-multi-steps text-bottom count">
                <li ng-repeat="step in vm.t2mSvc.conversionSteps track by $index" ng-class="{'current': vm.t2mSvc.currentStep === $index + 1}">
                    <a ng-click="vm.t2mSvc.currentStep = $index + 1" ng-disabled="(dropBox.$invalid||projectSettingsForm.$invalid||LayerSettingsOldForm.$invalid)">{{step}}</a>
                </li>
            </ul> -->
        </div>
        <div class="col-sm-8 col-md-9 col-lg-10">
            <div class="scrollable-widget-content" style="padding:0px;font-size:12px;margin:0px;" ng-hide="minimized" resize resize-y="200"
                resize-relative-to-screen="true">
                <!-- PROJECT SETTINGS-PAGE -->
                <div class="row" ng-show="vm.t2mSvc.currentStep === 1">
                    <div class="col-sm-12 wizard-width-limit">
                        <div id="project-settings" ng-class="{'disabled-form': !vm.t2mSvc.project}">
                            <form name="projectSettingsForm">
                                <div class="form-group">
                                    <label for="pj-title">{{'PROJECT_TITLE' | translate}}</label>
                                    <input type="text" id="pj-title" ng-model="vm.t2mSvc.project.title" class="form-control" />
                                </div>
                                <div class="form-group">
                                    <label for="pj-logo">{{'PROJECT_LOGO' | translate}}</label>
                                    <div class="row fill-height">
                                        <div class="col-sm-7 fill-height" style="padding-left: 0px">
                                            <img class="t2m-logo-image grey-border" id="logoImage" ng-src="{{vm.t2mSvc.logoData}}" />
                                        </div>
                                        <div class="col-sm-5 form-group">
                                        <!-- https://stackoverflow.com/a/20843201 -->
                                            <div class="file-upload-label btn t2m-btn t2m-btn-lg yellow" for="logo-upload" style="width: 100%"><i class="fa fa-picture-o small-padding" aria-hidden="true"></i><span>{{ 'UPLOAD_ICON' | translate}}</span>
                                                <input type="file" accept="image/png" id="logo-upload" style="margin-top:8px" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- LAYER TITLE-PAGE -->
                <div class="row" ng-show="vm.t2mSvc.currentStep === 2">
                    <div class="col-sm-12 wizard-width-limit">
                        <div id="layer-settings" ng-class="{'disabled-form': !vm.t2mSvc.project}">
                            <form name="LayerSettingsOldForm">
                                <div class="form-group">
                                    <label for="l-group">{{'GROUP' | translate}}</label>
                                    <ui-select select-group-on-blur ng-model="vm.t2mSvc.selectedGroup" ng-blur="vm.t2mSvc.checkGroups()" ng-keyup="$event.keyCode == 13 && vm.t2mSvc.checkGroups()"
                                        ng-class="{'ng-valid': vm.t2mSvc.selectedGroup.title, 'ng-invalid': !vm.t2mSvc.selectedGroup.title}">
                                        <ui-select-match placeholder="{{'SELECT_OR_CREATE_GROUP' | translate}}">
                                            <span ng-bind="$select.selected.title"></span>
                                        </ui-select-match>
                                        <ui-select-choices repeat="group in (vm.t2mSvc.project.groups | filter: $select.search) track by group.title">
                                            <span ng-bind="group.title"></span>
                                        </ui-select-choices>
                                    </ui-select>
                                    <!-- Fake textbox to add validation support to ui-select-box -->
                                    <input type="text" id="dummy" ng-model="vm.t2mSvc.selectedGroup.title" style="display: none" required>
                                </div>
                                <div class="form-group">
                                    <label for="l-title">{{'LAYER_TITLE' | translate}}</label>
                                    <input type="text" id="l-title" placeholder="{{'LAYER_TITLE' | translate}}" ng-model="vm.t2mSvc.layer.title" class="form-control" required/>
                                </div>
                                <div class="form-group">
                                    <label for="l-descr">{{'LAYER_DESCRIPTION' | translate}}</label>
                                    <input type="text" id="l-descr" placeholder="{{'LAYER_DESCRIPTION' | translate}}" ng-model="vm.t2mSvc.layer.description" class="form-control" />
                                </div>
                                <div class="form-group">
                                    <label for="l-checkboxes"></label>
                                    <div id="l-checkboxes">
                                        <div class="row">
                                            <div class="col-sm-6 form-group" style="padding-left:1px">
                                                <div class="zodk-checkbox">
                                                    <input type="checkbox" id="fitmap" data-ng-model="vm.t2mSvc.layer.fitToMap">
                                                    <label for="fitmap"></label>
                                                    <div class="zodk-checkbox-text" uib-tooltip="{{'FIT_TO_MAP_HELP' | translate}}">
                                                        {{'FIT_TO_MAP' | translate}}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-6 form-group">
                                                <div class="zodk-checkbox">
                                                    <input type="checkbox" id="l-enabled" data-ng-model="vm.t2mSvc.layer.enabled">
                                                    <label for="l-enabled"></label>
                                                    <div class="zodk-checkbox-text" uib-tooltip="{{'ENABLED_HELP' | translate}}">
                                                        {{'ENABLED' | translate}}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- UPLOAD-PAGE -->
                <div class="row" ng-show="vm.t2mSvc.currentStep === 3">
                    <div class="col-sm-12 fill-height wizard-width-limit">
                        <div class="row">
                            <div class="col-sm-12">
                            <h4>{{'UPLOAD_TABULAR_DATA' | translate}}<span><i class="fa fa-question-circle pointer" style="padding-left: 12px;" aria-hidden="true" uib-tooltip="{{'UPLOAD_HELP' | translate}}"></i></span></h4>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <label class="file-upload-label btn t2m-btn t2m-btn-lg yellow" for="file-upload" style="width:220px"><i class="fa fa-upload small-padding" aria-hidden="true"></i><span>{{ 'UPLOAD_FILE' | translate}}</span>
                                    <input type="file" id="file-upload" style="margin-top:8px" />
                                </label>
                            </div>
                        </div>
                        <div class="row" ng-show="vm.t2mSvc.uploadNotificationMessage">
                            <div class="col-xs-12">
                                <div class="zodk-notification-box" ng-class="{'text-success': vm.t2mSvc.uploadNotificationMessage.isOk, 'text-danger': !vm.t2mSvc.uploadNotificationMessage.isOk}">
                                    <i class="fa" ng-class="{'fa-check': vm.t2mSvc.uploadNotificationMessage.isOk, 'fa-times': !vm.t2mSvc.uploadNotificationMessage.isOk}"aria-hidden="true"></i>
                                    <div class="zodk-notification-text">
                                        <div class="zodk-notification-title">{{vm.t2mSvc.uploadNotificationMessage.title | translate}}</div>
                                        <div class="zodk-notification-description">{{vm.t2mSvc.uploadNotificationMessage.description}}</div> 
                                    </div>
                                </div>                               
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 text-center">
                                <form name="dropBox">
                                    <textarea rows="16" class="fill-height" id="drop-box" style="width:95%;margin-top: 24px" placeholder="{{'DRAG_FILE' | translate}}"
                                        ng-model="vm.t2mSvc.textContent" ng-model-options='{ debounce: 1000 }' ng-change="vm.t2mSvc.updatedContent(false)"
                                        autofocus required></textarea>
                                </form>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 text-center">
                                <i class="fa fa-cog btn small-padding pointer" style="padding-left: 24px;" aria-hidden="true" uib-tooltip="{{'CSV_PARSE_SETTINGS' | translate}}"
                                    ng-click="vm.t2mSvc.openParseSettings()"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- STYLE PAGE -->
                <div class="row" ng-show="vm.t2mSvc.currentStep === 4">
                    <h4 ng-hide="vm.t2mSvc.rowCollection.length > 0">{{'NO_DATA_TABLE' | translate}}</h4>
                    <div class="col-sm-8" ng-show="vm.t2mSvc.rowCollection.length > 0">
                        <div class="row">
                            <h4>{{'STYLE_SETTINGS' | translate}}<span><i class="fa fa-question-circle pointer" style="padding-left: 12px;" aria-hidden="true" uib-tooltip="{{'STYLE_SETTINGS_HELP' | translate}}"></i></span></h4>
                        </div>
                        <form class="form-horizontal" id="style-settings-form">
                            <div class="grey-border">
                                <div class="form-group">
                                    <label for="geo-type" class="col-sm-3">{{'GEOMETRY_TYPE' | translate}}</label>
                                    <div class="col-sm-9">
                                        <select class="form-control inline-select" id="geo-type" ng-change="vm.t2mSvc.selectGeoType(true)" ng-model="vm.t2mSvc.geometryTypeId"
                                            ng-options="id as type.name for (id, type) in geometryTypes"></select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="geo-col" class="col-sm-3">{{'SELECT_GEOMETRY_COLUMNS' | translate}}</label>
                                    <div class="col-sm-9">
                                        <button if="geo-col" class="btn small-margin" ng-click="vm.t2mSvc.openTable()"><i class="fa fa-table small-padding"></i><span>{{'CHOOSE_DROPDOWN' | translate}}</span></button>
                                        <span><i class="fa fa-question-circle pointer" style="padding: 0 16px 0 12px;" aria-hidden="true" uib-tooltip="{{'SELECT_GEOMETRY_COLUMNS_HELP' | translate}}"></i>
                                        <div style="display: inline" translate="SELECT_NR_COLUMNS" translate-values="{nr: nrSelectedGeometryColumns}"></div>
                                        </span>
                                        <!--<table ng-show="'Object.keys(vm.t2mSvc.geometryColumns).length > 0'">
                                            <tbody>
                                                <tr class="row no-margin" ng-repeat="(geoInputTitle, headerObj) in vm.t2mSvc.geometryColumns">
                                                    <td class="small-padding bold">{{geoInputTitle}}</td>
                                                    <td class="small-padding">{{headerObj.title}}</td>
                                                    <td class="small-padding">({{'COLUMN' | translate}} {{headerObj.code}})</td>
                                                    <td ng-hide="$last" class="pointer" ng-click="vm.t2mSvc.swapRows($index)" uib-tooltip="{{'SWAP_ROWS' | translate}}"><img class="swap-arrows" src="images/swap-arrows.png" /> </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <div ng-hide="'Object.keys(vm.t2mSvc.geometryColumns).length > 0'">{{'SELECT_GEOMETRY_COLUMNS_HINT' | translate}}</div>-->
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="namelabel-col" class="col-sm-3">{{'SELECT_NAMELABEL_COLUMN' | translate}}</label>
                                    <div class="col-sm-9">
                                        <button if="namelabel-col" class="btn small-margin" ng-click="vm.t2mSvc.openTable('col', 1, true)"><i class="fa fa-table small-padding"></i><span>{{'CHOOSE_DROPDOWN' | translate}}</span></button>
                                        <span><i class="fa fa-question-circle pointer" style="padding: 0 16px 0 12px;" aria-hidden="true" uib-tooltip="{{'SELECT_NAMELABEL_COLUMN_HELP' | translate}}"></i>
                                            <div ng-show="vm.t2mSvc.featureType.style.nameLabel" style="display: inline">{{vm.t2mSvc.getColumnTitle(vm.t2mSvc.featureType.style.nameLabel)}} ({{'COLUMN' | translate}} {{vm.t2mSvc.featureType.style.nameLabel}})</div>
                                            <div ng-hide="vm.t2mSvc.featureType.style.nameLabel" style="display: inline">{{'NO_NAMELABEL_SELECTED' | translate}}</div>
                                        </span>
                                        <!--<table ng-show="vm.t2mSvc.featureType.style.nameLabel">
                                            <tbody>
                                                <tr class="row no-margin">
                                                    <td class="small-padding">{{vm.t2mSvc.getColumnTitle(vm.t2mSvc.featureType.style.nameLabel)}}</td>
                                                    <td class="small-padding">({{'COLUMN' | translate}} {{vm.t2mSvc.featureType.style.nameLabel}})</td>
                                                </tr>
                                            </tbody>
                                        </table>-->
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="add-info" class="col-sm-3">{{'ADDITIONAL_INFO' | translate}}</label>
                                    <div class="col-sm-9" ng-show="vm.t2mSvc.geometryType">
                                        <select class="form-control inline-select" id="add-info" ng-model="vm.t2mSvc.additionalInfo" ng-options="info for info in vm.t2mSvc.geometryType.additionalInfo" ng-change="vm.t2mSvc.layerDataChanged(true)"
                                            ng-disabled="!vm.t2mSvc.geometryType || vm.t2mSvc.geometryType.additionalInfo.length < 1"></select>
                                        <i class="fa fa-question-circle pointer" style="padding: 0 16px 0 12px;" aria-hidden="true" uib-tooltip="{{'ADDITIONAL_INFO_COLUMN_HELP' | translate}}"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="grey-border" style="margin: 6px 0 0 0;" id="style-settings-section">
                                <div class="form-group">
                                    <label for="f-icon" class="col-sm-3">{{'ICON_IMAGE' | translate}}</label>
                                    <div class="col-sm-9">
                                        <div class="row form-inline">
                                            <div class="col-sm-5 form-group">
                                                <div id="f-icon" class="file-upload-label btn" for="icon-upload"><i class="fa fa-picture-o small-padding" aria-hidden="true"></i><span>{{ 'UPLOAD_ICON' | translate}}</span>
                                            <input type="file" accept="image/png" id="icon-upload" style="margin-top:8px" />
                                        </div>
                                            </div>
                                            <div class="col-sm-1 text-center">
                                                <img class="grey-border" id="iconImage" ng-src="{{vm.t2mSvc.iconData}}" />
                                            </div>
                                            <div class="col-sm-6 form-group">
                                                <label for="fill-col">{{'FILL_COLOR' | translate}}</label>
                                                <spectrum-colorpicker name="fill-col" data-ng-model="vm.t2mSvc.featureType.style['fillColor']" options="{ cancelText: 'Cancel', chooseText: 'OK', preferredFormat: 'hex', showInput: true }"></spectrum-colorpicker>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="f-default-style" class="col-sm-3">{{'DEFAULT_STYLE_PROPERTY' | translate}}</label>
                                    <div class="col-sm-9">
                                        <div class="row form-inline">
                                            <div class="col-sm-5 col-xs-10 form-group">
                                                <select id="f-default-style" class="form-control full-width" ng-model="vm.t2mSvc.defaultLegendProperty"
                                            ng-options="hdr.code as hdr.title for hdr in vm.t2mSvc.headerCollection"></select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="collapse" id="advancedIconSettings">
                                    <div class="form-group">
                                        <label for="iconDimensions" class="col-sm-3">{{'ICON_DIMENSIONS' | translate}}</label>
                                        <div class="col-sm-9" id="iconDimensions">
                                            <div class="row form-inline">
                                                <div class="col-sm-6 form-group">
                                                    <label for="iconHeight">{{'ICON_HEIGHT' | translate}}</label>
                                                    <input type="number" min="0" max="320" name="iconHeight" data-ng-model="vm.t2mSvc.featureType.style['iconHeight']" class="form-control"
                                                        ng-disabled="vm.t2mSvc.featureType.style['drawingMode'] != 'Point'">
                                                </div>
                                                <div class="col-sm-6 form-group">
                                                    <label for="iconWidth">{{'ICON_WIDTH' | translate}}</label>
                                                    <input type="number" min="0" max="320" name="iconWidth" data-ng-model="vm.t2mSvc.featureType.style['iconWidth']" min="0"
                                                        class="form-control" ng-disabled="vm.t2mSvc.featureType.style['drawingMode'] != 'Point'">
                                                </div>
                                            </div>
                                            <div class="row form-inline">
                                                <div class="col-sm-6 form-group">
                                                    <label for="transparency">{{'TRANSPARENCY' | translate}}</label>
                                                    <input type="number" step="5" min="0" max="100" name="transparency" ng-change="vm.t2mSvc.featureType.style['strokeOpacity']=vm.t2mSvc.featureType.style['opacity'];vm.t2mSvc.featureType.style['fillOpacity']=vm.t2mSvc.featureType.style['opacity']"
                                                        ng-model="vm.t2mSvc.featureType.style['opacity']" transparency-to-opacity class="form-control">
                                                </div>
                                                <div class="col-sm-6 form-group">
                                                    <label for="corner-radius">{{'CORNER_RADIUS' | translate}}</label>
                                                    <input type="number" name="corner-radius" data-ng-model="vm.t2mSvc.featureType.style['cornerRadius']" class="form-control"
                                                        ng-disabled="vm.t2mSvc.featureType.style['drawingMode'] != 'Point'">
                                                </div>
                                            </div>
                                            <div class="row form-inline">
                                                <div class="col-sm-6 form-group">
                                                    <label for="stroke-col">{{'STROKE_COLOR' | translate}}</label>
                                                    <spectrum-colorpicker name="stroke-col" data-ng-model="vm.t2mSvc.featureType.style['strokeColor']" options="{cancelText: 'Cancel', chooseText: 'OK', preferredFormat: 'hex'}"></spectrum-colorpicker>
                                                </div>
                                                <div class="col-sm-6 form-group">
                                                    <label for="stroke-w">{{'STROKE_WIDTH' | translate}}</label>
                                                    <input type="number" name="stroke-w" min="0" max="32" data-ng-model="vm.t2mSvc.featureType.style['strokeWidth']" class="form-control">
                                                </div>
                                            </div>
                                            <div class="row form-inline">
                                                <div class="col-sm-6 form-group">
                                                    <label for="sel-stroke-col">{{'SELECTED_STROKE_COLOR' | translate}}</label>
                                                    <spectrum-colorpicker name="sel-stroke-col" data-ng-model="vm.t2mSvc.featureType.style['selectedStrokeColor']" options="{cancelText: 'Cancel', chooseText: 'OK', preferredFormat: 'hex'}"></spectrum-colorpicker>
                                                </div>
                                                <div class="col-sm-6 form-group">
                                                    <label for="sel-stroke-w">{{'SELECTED_STROKE_WIDTH' | translate}}</label>
                                                    <input type="number" name="sel-stroke-w" min="0" max="32" data-ng-model="vm.t2mSvc.featureType.style['selectedStrokeWidth']"
                                                        class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="clustering-group" class="col-sm-3">{{'CLUSTERING_OPTIONS' | translate}}</label>
                                        <div class="col-sm-9" id="clustering-group">
                                            <div class="row form-inline">
                                                <div class="col-sm-6 form-group">
                                                    <label for="clustering">{{'CLUSTERING' | translate}}</label>
                                                    <input type="checkbox" id="clustering" data-ng-model="vm.t2mSvc.clusterOptions.clustering" class="checkbox-primary" ng-disabled="vm.t2mSvc.featureType.style['drawingMode'] != 'Point'">
                                                </div>
                                                <div class="col-sm-6 form-group">
                                                    <label for="clusterLevel">{{'CLUSTER_LEVEL' | translate}}</label>
                                                    <input type="number" id="clusterLevel" data-ng-model="vm.t2mSvc.clusterOptions.clusterLevel" min="0" max="24" class="form-control"
                                                        ng-disabled="vm.t2mSvc.featureType.style['drawingMode'] != 'Point'">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pagination pull-right pointer">
                                    <ul class="pagination">
                                        <li>
                                            <a type="button" data-toggle="collapse" data-target="#advancedIconSettings" aria-expanded="false" aria-controls="advancedIconSettings">
                                                <i class="fa fa-chevron-up"></i>
                                                <i class="fa fa-chevron-down"></i> {{'ADVANCED_SETTINGS' | translate}}
                                            </a>
                                        </li>
                                        <li>
                                            <a type="button">
                                                <i class="fa fa-save"></i> {{'SAVE' | translate | titleCase}}
                                            </a>
                                        </li>
                                        <li>
                                            <a type="button" ng-click="vm.t2mSvc.convertAndOpen()">
                                                <i class="fa fa-map-o"></i> {{'SAVE_AND_OPEN' | translate}}
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="col-sm-4" ng-show="vm.t2mSvc.rowCollection.length > 0">
                        <div class="row">
                            <h4>{{'STYLE_PREVIEW' | translate}}</h4>
                            <label>{{'CURRENT_ZOOM' | translate}}: {{vm.t2mSvc.currentZoom}}</label>
                            <span style="margin-left: 32px;">
                                <label ng-show="vm.t2mSvc.feature.isSelected">{{'FEATURE_SELECTED' | translate}}</label>
                                <label ng-hide="vm.t2mSvc.feature.isSelected">{{'FEATURE_DESELECTED' | translate}}</label>
                            </span>
                            <div id="previewMap"></div>
                        </div>
                        <div class="row no-margin" style="max-width: 400px;">
                            <div class="form-group">
                                <label for="select-preview-f-2">{{'SELECT_FEATURE_TO_PREVIEW' | translate}}</label>
                                <select class="form-control" id="select-preview-f-2" ng-options="vm.t2mSvc.rowCollection.indexOf(row) as row[vm.t2mSvc.featureType.style.nameLabel] for row in vm.t2mSvc.rowCollection"
                                    ng-model="vm.t2mSvc.selectedRowIndex" ng-change="vm.t2mSvc.selectRowIndex(vm.t2mSvc.selectedRowIndex)"></select>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- PROPERTY TYPES -->
                <div class="row" ng-show="vm.t2mSvc.currentStep === 5">
                    <h4 ng-hide="vm.t2mSvc.rowCollection.length > 0">{{'NO_DATA_TABLE' | translate}}</h4>
                    <div ng-show="vm.t2mSvc.rowCollection.length > 0" class="col-xs-8 col-md-5 col-md-offset-1">
                        <form id="propertySettingsForm" class="form-horizontal">
                            <div class="form-group form-header">
                                <h4>{{'PROPERTY_SETTINGS' | translate}}
                                    <span><i class="fa fa-question-circle pointer" style="padding-left: 12px;" aria-hidden="true" uib-tooltip="{{'PROPERTY_SETTINGS_HELP' | translate}}"></i></span>
                                </h4>
                            </div>
                            <!--<div class="form-group larger-font bold">
                                <label for="p-title" class="col-sm-3">{{'SELECTED_PROPERTY' | translate}}</label>
                                <div class="col-sm-9">
                                    <div ng-show="vm.t2mSvc.pType.title">{{vm.t2mSvc.pType.title}}</div>
                                    <div ng-hide="vm.t2mSvc.pType.title">{{'NO_PROPERTY_SELECTED' | translate}}</div>
                                </div>
                            </div>-->
                            <div class="form-group">
                                <label for="p-title" class="col-sm-3">{{'TITLE' | translate}}</label>
                                <div class="col-sm-9">
                                    <input type="text" data-ng-model="vm.t2mSvc.pType.title" class="form-control" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="p-description" class="col-sm-3">{{'DESCRIPTION' | translate}}</label>
                                <div class="col-sm-9">
                                    <input type="text" id="p-description" data-ng-model="vm.t2mSvc.pType.description" data-ng-change="vm.t2mSvc.updatePropertyPreview()"
                                        class="form-control" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="p-type" class="col-sm-3">{{'TYPE' | translate}}</label>
                                <div class="col-sm-9">
                                    <select data-ng-model="vm.t2mSvc.pType.type" id="p-type" ng-options="type as name for (type, name) in propertyTypeTypes"
                                        class="form-control" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="p-visibility" class="col-sm-3">{{'VISIBILITY' | translate}}</label>
                                <div class="col-sm-9">
                                    <div class="row">
                                        <div class="col-xs-6 no-padding">
                                            <label for="p-callout">{{'VISIBLE_IN_CALLOUT' | translate}}</label>
                                            <input type="checkbox" data-ng-model="vm.t2mSvc.pType.visibleInCallOut" id="p-callout" />
                                        </div>
                                        <div class="col-xs-6 no-padding">
                                            <label for="p-tooltip">{{'VISIBLE_IN_TOOLTIP' | translate}}</label>
                                            <input type="checkbox" data-ng-model="vm.t2mSvc.pType.visibleInTooltip" id="p-tooltip" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="collapse" id="advancedPropSettings">
                                <div class="form-group">
                                    <label for="p-sf" class="col-sm-3">{{'STRINGFORMAT' | translate}}</label>
                                    <div class="col-sm-9">
                                        <select data-ng-model="vm.t2mSvc.pType.stringFormat" id="p-sf" ng-options="entry.val as entry.name for entry in stringFormats" data-ng-change="vm.t2mSvc.updatePropertyPreview()"
                                            class="form-control" ng-disabled="vm.t2mSvc.pType.type !== 'number'" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="p-section" class="col-sm-3">{{'SECTION' | translate}}</label>
                                    <div class="col-sm-9 ">
                                        <ui-select select-section-on-blur object-to-value ng-model="vm.t2mSvc.pType.section" ng-blur="vm.t2mSvc.checkSections()"
                                            ng-keyup="$event.keyCode == 13 && vm.t2mSvc.checkSections()">
                                            <ui-select-match placeholder="{{'SELECT_OR_CREATE_SECTION' | translate}}">
                                                <span ng-bind="$select.selected.name"></span>
                                            </ui-select-match>
                                            <ui-select-choices repeat="section in vm.t2mSvc.sections | filter: $select.search track by section.name">
                                                <span ng-bind="section.name"></span>
                                            </ui-select-choices>
                                        </ui-select>
                                        <!--<div class="input-group">
                                        <input class="form-control" type="text" list="sections" data-ng-model="vm.t2mSvc.pType.section" ng-keyup="$event.keyCode == 13 && vm.t2mSvc.checkSections()"
                                            ng-blur="vm.t2mSvc.checkSections()">
                                        <datalist id="sections">
                                            <option ng-repeat="section in vm.t2mSvc.sections" value="{{section}}"></option>
                                        </datalist>
                                        <span class="input-group-btn" ng-click="vm.t2mSvc.pType.section = '';vm.t2mSvc.updatePropertyPreview()"><button class="btn btn-default" uib-tooltip="{{'CLEAR' | translate}}"><i class="fa fa-times"></i></button></span>
                                    </div>-->
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="p-range" class="col-sm-3">{{'DATA_RANGE' | translate}}</label>
                                    <div class="col-sm-9 form-inline">
                                        <div class="row">
                                            <div class="col-xs-6 no-padding">
                                                <label for="p-min">{{'STATS.MIN' | translate}}</label>
                                                <input type="number" class="form-control" data-ng-model="vm.t2mSvc.pType.min" id="p-min" style="max-width:100%"/>
                                            </div>
                                            <div class="col-xs-6 no-padding">
                                                <label for="p-max">{{'STATS.MAX' | translate}}</label>
                                                <input type="number" class="form-control" data-ng-model="vm.t2mSvc.pType.max" id="p-max" style="max-width:100%"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="p-autofill-all" class="col-sm-3">{{'AUTODETECT_TYPES' | translate}}<span><i class="fa fa-question-circle pointer" style="padding-left: 12px;" aria-hidden="true" uib-tooltip="{{'AUTODETECT_TYPES_HELP' | translate}}"></i></span></label>
                                    <div class="col-sm-9 form-inline">
                                        <div class="row">
                                            <div class="col-xs-12 no-padding">
                                                <button class="btn btn-default" ng-click="vm.t2mSvc.generateFeatureType(true)" style="min-width: 64px;"><i class="fa fa-magic"></i></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="pagination pull-right pointer">
                                <ul class="pagination">
                                    <li>
                                        <a type="button" data-toggle="collapse" data-target="#advancedPropSettings" aria-expanded="false" aria-controls="advancedPropSettings">
                                            <i class="fa fa-chevron-up"></i>
                                            <i class="fa fa-chevron-down"></i> {{'ADVANCED_SETTINGS' | translate}}
                                        </a>
                                    </li>
                                    <li>
                                        <a type="button">
                                            <i class="fa fa-save"></i> {{'SAVE' | translate}}
                                        </a>
                                    </li>
                                    <li>
                                        <a type="button" ng-click="vm.t2mSvc.convertAndOpen()">
                                            <i class="fa fa-map-o"></i> {{'SAVE_AND_OPEN' | translate}}
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </form>
                    </div>
                    <div class="col-sm-4 col-lg-3 text-center" ng-show="vm.t2mSvc.rowCollection.length > 0">
                        <div class="row">
                            <div class="form-group">
                                <label for="select-preview-f">{{'SELECT_FEATURE_TO_PREVIEW' | translate}}</label>
                                <select class="form-control" id="select-preview-f" ng-options="vm.t2mSvc.rowCollection.indexOf(row) as row[vm.t2mSvc.featureType.style.nameLabel] for row in vm.t2mSvc.rowCollection"
                                    ng-model="vm.t2mSvc.selectedRowIndex" ng-change="vm.t2mSvc.selectRowIndex(vm.t2mSvc.selectedRowIndex)"></select>
                            </div>
                        </div>
                        <div class="row">
                            <rightpanelpreview style="text-align: left;"></rightpanelpreview>
                        </div>
                    </div>
                </div>
                <!-- Layer settings -->
                <div class="row" ng-show="vm.t2mSvc.currentStep === 4">
                    <div class="col-xs-8 col-md-5 col-md-offset-1">
                        <div class="form-group">
                            <!--<label for="convert-btn">{{'DATA_TO_MAP' | translate}}</label>-->
                            <button id="convert-btn" class="btn btn-primary big-button" data-ng-click="vm.t2mSvc.convert()">{{'CONVERT' | translate}}</button>
                        </div>
                        <div class="form-group">
                            <!--<label for="show-project">{{'SHOW_PROJECT' | translate}}</label>-->
                            <a style="font-size: 24px" id="show-project" target="_blank" ng-href="{{'http://localhost:3004/?project='+vm.t2mSvc.project.id}}">{{'SHOW_PROJECT' | translate}}</a>
                        </div>
                    </div>
                    <div class="col-xs-4 col-lg-3">
                        <!--LAYER MENU PREVIEW
                        <div class="panel-border" style="min-height: 200px; margin-bottom: 24px">
                            <layerlistpreview></layerlistpreview>
                        </div>-->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="fixed-widget-footer">
    </div>
</div>
