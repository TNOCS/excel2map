<div class="all-widget-content fill-height">
    <div class="fixed-widget-header">
        <!-- <div style="display: inline-block; margin-left: 2px;" ng-hide="data.hideTitle">
            <div style="display: inline-block; font-size:16px; font-weight:bold; margin-bottom:2px;">{{data.title}}</div>
            <div style="display: inline-block; margin-right:5px; position: absolute; top: 2px; right: 0px;">
                <a class="widget-min-max-close" ng-click="vm.t2mSvc.close()" ng-if="vm.t2mSvc.canClose()"><i class="fa fa-times"></i></a>
                <a class="widget-min-max-close" ng-click="vm.t2mSvc.minimize()" ng-show="vm.t2mSvc.canMinimize() && minimized"> <i class="fa fa-plus"></i></a>
                <a class="widget-min-max-close" ng-click="vm.t2mSvc.minimize()" ng-show="vm.t2mSvc.canMinimize() && !minimized"> <i class="fa fa-minus"></i></a>
                <a class="widget-min-max-close" ng-click="vm.t2mSvc.exportToPDF()"><i class="fa fa-save" uib-tooltip="{{'SAVE_AS_PDF' | translate}}" ng-show="vm.t2mSvc.exporterAvailable&&!minimized"></i></a>
            </div>
        </div> -->
        <!--<div class="row text-center no-margin">
            <ul uib-pagination ng-model="vm.t2mSvc.currentStep" total-items="vm.t2mSvc.numberOfSteps" items-per-page="1" previous-text="{{'PREVIOUS_STEP' | translate}}"
                next-text="{{'NEXT_STEP' | translate}}" ng-disabled="(dropBox.$invalid||loadProjectForm.$invalid||projectSettingsForm.$invalid||LayerSettingsOldForm.$invalid)"></ul>
            <ul ng-show="vm.t2mSvc.rowCollection.length > 0" class="pagination pointer" aria-hidden="true" uib-tooltip="{{'SHOW_TABLE' | translate}}"
                tooltip-placement="bottom" style="margin-left: 32px;">
                <li>
                    <a class="fa fa-table" style="text-transform: uppercase;" ng-click="vm.t2mSvc.openTable('none', 0)"><span class="small-padding-left">{{'TABLE_LABEL' | translate}}</span></a>
                </li>
            </ul>
        </div>-->

        <div class="row no-margin">
                <div class="wizard-title">{{vm.t2mSvc.currentStep}}. {{vm.t2mSvc.conversionSteps[vm.t2mSvc.currentStep - 1]}}

                <span style="font-size: 16px; margin-top: 9px;" class="pull-right pointer" uib-tooltip="{{'EXIT_WIZARD' | translate}}" tooltip-placement="left" ng-click="vm.closeWizard()"><span class="icon-sluit"></span></span>

                <span class="larger-font small-padding pull-right pointer" style="margin-right:30px" ng-show="vm.t2mSvc.notFoundLocations" uib-tooltip="{{'DATA_NOT_CONVERTED_CORRECTLY' | translate}}" tooltip-placement="left" ng-click="vm.showMissingLocations()"><i class="fa fa-exclamation-triangle"></i></span>

                <span class="pull-right" ng-show="vm.t2mSvc.rowCollection.length > 0">
                    <div style="margin-right: 30px;">
                        <a class="label-text" ng-click="vm.t2mSvc.openTable('none', 0)">
                            <i class="fa fa-table"></i>
                            <span class="small-padding-left">{{'SHOW_TABLE' | translate}}</span>
                        </a>
                    </div>
                </span>
            </div>
        </div>
    </div>
    <div class="row" style="margin: 0px">
        <div class="col-sm-4 col-md-3 col-lg-2" id="progress-content">
            <ul class="SteppedProgress Vertical">
                <li ng-repeat="step in vm.t2mSvc.conversionSteps track by $index" ng-class="{'complete': vm.t2mSvc.currentStep >= $index + 1}">
                    <a ng-click="vm.t2mSvc.currentStep = $index + 1" ng-disabled="((dropBox.$invalid||projectSettingsForm.$invalid||LayerSettingsOldForm.$invalid||!vm.t2mSvc.geometryInfoComplete)&&$index!=0)">{{step}}</a>
                </li>
            </ul>
            <!-- <ul class="cd-multi-steps text-bottom count">
                <li ng-repeat="step in vm.t2mSvc.conversionSteps track by $index" ng-class="{'current': vm.t2mSvc.currentStep === $index + 1}">
                    <a ng-click="vm.t2mSvc.currentStep = $index + 1" ng-disabled="(dropBox.$invalid||projectSettingsForm.$invalid||LayerSettingsOldForm.$invalid)">{{step}}</a>
                </li>
            </ul> -->
        </div>
        <div class="col-sm-8 col-md-9 col-lg-10" id="wizard-content">
            <div class="scrollable-widget-content" ng-hide="minimized" resize resize-y="200"
                resize-relative-to-screen="true">
                <!-- PROJECT SETTINGS-PAGE -->
                <div class="row" ng-show="vm.t2mSvc.currentStep === 1">
                    <div class="col-sm-12 wizard-width-limit">
                        <div id="project-settings" ng-class="{'disabled-form': !vm.t2mSvc.project}">
                            <form name="projectSettingsForm">
                                <div class="form-group">
                                    <label for="pj-title">{{'PROJECT_TITLE' | translate}}</label>
                                    <input type="text" id="pj-title" ng-model="vm.t2mSvc.project.title" class="form-control" />
                                </div>
                                <div class="form-group">
                                    <label for="pj-logo">{{'PROJECT_LOGO' | translate}}
                                        <span class="icon-ic_help_outline_black help_icon" aria-hidden="true" uib-tooltip="{{'UPLOAD_ICON_HELP' | translate}}"></span>
                                        </label>
                                    <div class="row fill-height">
                                        <div class="col-sm-7 fill-height" style="padding-left: 0px">
                                            <img class="t2m-logo-image grey-border" id="logoImage" ng-src="{{vm.t2mSvc.logoData}}" />
                                        </div>
                                        <div class="col-sm-5 form-group">
                                        <!-- https://stackoverflow.com/a/20843201 -->
                                            <div class="file-upload-label btn t2m-btn t2m-btn-lg yellow" for="logo-upload" style="width: 100%"><i class="fa fa-picture-o small-padding" aria-hidden="true"></i><span>{{ 'UPLOAD_ICON' | translate}}</span>
                                                <input type="file" accept="image/png" id="logo-upload" style="margin-top:8px" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- LAYER TITLE-PAGE -->
                <div class="row" ng-show="vm.t2mSvc.currentStep === 2">
                    <div class="col-sm-12 wizard-width-limit">
                        <div id="layer-settings" ng-class="{'disabled-form': !vm.t2mSvc.project}">
                            <form name="LayerSettingsOldForm">
                                <div class="form-group">
                                    <label for="l-group">{{'GROUP' | translate}}</label><span class="icon-ic_help_outline_black help_icon" aria-hidden="true" uib-tooltip="{{'GROUP_HELP' | translate}}"></span>
                                    <ui-select select-group-on-blur ng-model="vm.t2mSvc.selectedGroup" ng-blur="vm.t2mSvc.checkGroups()" ng-keyup="$event.keyCode == 13 && vm.t2mSvc.checkGroups()"
                                        ng-class="{'ng-valid': vm.t2mSvc.selectedGroup.title, 'ng-invalid': !vm.t2mSvc.selectedGroup.title}">
                                        <ui-select-match placeholder="{{'SELECT_OR_CREATE_GROUP' | translate}}">
                                            <span ng-bind="$select.selected.title"></span>
                                        </ui-select-match>
                                        <ui-select-choices repeat="group in (vm.t2mSvc.project.groups | filter: $select.search) track by group.title">
                                            <span ng-bind="group.title"></span>
                                        </ui-select-choices>
                                    </ui-select>
                                    <!-- Fake textbox to add validation support to ui-select-box -->
                                    <input type="text" id="dummy" ng-model="vm.t2mSvc.selectedGroup.title" style="display: none" required>
                                </div>
                                <div class="form-group">
                                    <label for="l-title">{{'LAYER_TITLE' | translate}}</label><span class="icon-ic_help_outline_black help_icon" aria-hidden="true" uib-tooltip="{{'LAYER_TITLE_HELP' | translate}}"></span>
                                    <input type="text" id="l-title" placeholder="{{'LAYER_TITLE' | translate}}" ng-model="vm.t2mSvc.layer.title" class="form-control" required/>
                                </div>
                                <div class="form-group">
                                    <label for="l-descr">{{'LAYER_DESCRIPTION' | translate}}</label>
                                    <input type="text" id="l-descr" placeholder="{{'LAYER_DESCRIPTION' | translate}}" ng-model="vm.t2mSvc.layer.description" class="form-control" />
                                </div>
                                <div class="form-group">
                                    <label for="l-checkboxes"></label>
                                    <div id="l-checkboxes">
                                        <div class="row">
                                            <div class="col-sm-6 form-group" style="padding-left:1px">
                                                <div class="zodk-checkbox">
                                                    <input type="checkbox" id="fitmap" data-ng-model="vm.t2mSvc.layer.fitToMap">
                                                    <label for="fitmap"></label>
                                                    <div class="zodk-checkbox-text">
                                                        {{'FIT_TO_MAP' | translate}}
                                                        <span class="icon-ic_help_outline_black help_icon pointer" aria-hidden="true" uib-tooltip="{{'FIT_TO_MAP_HELP' | translate}}" tooltip-placement="bottom"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-6 form-group">
                                                <div class="zodk-checkbox">
                                                    <input type="checkbox" id="l-enabled" data-ng-model="vm.t2mSvc.layer.enabled">
                                                    <label for="l-enabled"></label>
                                                    <div class="zodk-checkbox-text">
                                                        {{'ENABLED' | translate}}
                                                        <span class="icon-ic_help_outline_black help_icon pointer" aria-hidden="true" uib-tooltip="{{'ENABLED_HELP' | translate}}" tooltip-placement="bottom"></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- UPLOAD-PAGE -->
                <div class="row" ng-show="vm.t2mSvc.currentStep === 3">
                    <div class="col-sm-12 fill-height wizard-width-limit">
                        <div class="row">
                            <div class="col-sm-12">
                            <h4>{{'UPLOAD_TABULAR_DATA' | translate}}<span class="icon-ic_help_outline_black help_icon" aria-hidden="true" uib-tooltip="{{'UPLOAD_HELP' | translate}}"></span></h4>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <label class="file-upload-label btn t2m-btn t2m-btn-lg yellow" for="file-upload" style="width:220px"><i class="fa fa-upload small-padding" aria-hidden="true"></i><span>{{ 'UPLOAD_FILE' | translate}}</span>
                                    <input type="file" id="file-upload" style="margin-top:8px" />
                                </label>
                            </div>
                        </div>
                        <div class="row" ng-show="vm.t2mSvc.uploadNotificationMessage">
                            <div class="col-xs-12">
                                <div class="zodk-notification-box" ng-class="{'text-success': vm.t2mSvc.uploadNotificationMessage.isOk, 'text-danger': !vm.t2mSvc.uploadNotificationMessage.isOk}">
                                    <i class="fa" ng-class="{'fa-check': vm.t2mSvc.uploadNotificationMessage.isOk, 'fa-times': !vm.t2mSvc.uploadNotificationMessage.isOk}"aria-hidden="true"></i>
                                    <div class="zodk-notification-text">
                                        <div class="zodk-notification-title">{{vm.t2mSvc.uploadNotificationMessage.title | translate}}</div>
                                        <div class="zodk-notification-description">{{vm.t2mSvc.uploadNotificationMessage.description}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row" style="padding-top: 10px;">
                            <div class="col-xs-12 text-center no-padding">
                                <form name="dropBox">
                                    <textarea rows="16" class="fill-height" id="drop-box" style="width:95%;padding: 8px 12px;" placeholder="{{'DRAG_FILE' | translate}}"
                                        ng-model="vm.t2mSvc.textContent" ng-model-options='{ debounce: 1000 }' ng-change="vm.t2mSvc.updatedContent(false)"
                                        autofocus required></textarea>
                                </form>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <div class="btn-circle yellow">
                                <span class="icon-bewerken pointer" aria-hidden="true" uib-tooltip="{{'CSV_PARSE_SETTINGS' | translate}}"
                                    ng-click="vm.t2mSvc.openParseSettings()"></span>
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- STYLE PAGE -->
                <div class="row" ng-show="vm.t2mSvc.currentStep === 4">
                    <h4 ng-hide="vm.t2mSvc.rowCollection.length > 0">{{'NO_DATA_TABLE' | translate}}</h4>
                    <div class="col-sm-8 wizard-width-limit" ng-show="vm.t2mSvc.rowCollection.length > 0">
                        <form class="form" id="style-settings-form">
                            <div class="row border-bottom">
                                <div data-toggle="collapse" data-target="#geometrySettings" aria-expanded="true" aria-controls="geometrySettings">
                                    <label class="pointer">{{'GEOMETRY' | translate}}
                                        <span class="fa fa-caret-up"></span>
                                        <span class="fa fa-caret-down"></span>
                                    </label>
                                </div>
                            </div>
                            <div class="collapse in" id="geometrySettings">
                                <div class="form-group">
                                    <label for="geo-type">{{'GEOMETRY_TYPE' | translate}}</label>
                                    <div>
                                        <select class="form-control inline-select" id="geo-type" ng-change="vm.t2mSvc.selectGeoType(true)" ng-model="vm.t2mSvc.geometryTypeId" ng-options="id as type.name for (id, type) in geometryTypes"></select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="geo-col">{{'SELECT_GEOMETRY_COLUMNS' | translate}}</label>
                                    <span class="icon-ic_help_outline_black help_icon" aria-hidden="true" uib-tooltip="{{'SELECT_GEOMETRY_COLUMNS_HELP' | translate}}"></span>
                                    <div>
                                        <button id="geo-col" class="btn t2m-btn t2m-btn-lg grey" style="width:100%" ng-click="vm.t2mSvc.openTable()">
                                            <div class="zodk-in-btn-text" translate="SELECT_NR_COLUMNS" translate-values="{nr: nrSelectedGeometryColumns}"></div>
                                            <span class="pull-right" style="padding: 0px 16px;"><i class="fa fa-table small-padding"></i>
                                            {{'EDIT_COLS' | translate}}</span>
                                        </button>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="namelabel-col">{{'SELECT_NAMELABEL_COLUMN' | translate}}</label>
                                    <span class="icon-ic_help_outline_black help_icon" aria-hidden="true" uib-tooltip="{{'SELECT_NAMELABEL_COLUMN_HELP' | translate}}"></span>
                                    <div>
                                        <button id="namelabel-col" class="btn t2m-btn t2m-btn-lg grey" style="width:100%" ng-click="vm.t2mSvc.openTable('col', 1, true)">
                                            <div class="zodk-in-btn-text" ng-show="vm.t2mSvc.featureType.style.nameLabel" style="display: inline">{{vm.t2mSvc.getColumnTitle(vm.t2mSvc.featureType.style.nameLabel)}} ({{'COLUMN' | translate}} {{vm.t2mSvc.getColumnHeader(vm.t2mSvc.featureType.style.nameLabel)}})</div>
                                            <div class="zodk-in-btn-text" ng-hide="vm.t2mSvc.featureType.style.nameLabel" style="display: inline">{{'NO_NAMELABEL_SELECTED' | translate}}</div>
                                            <span class="pull-right" style="padding: 0px 16px;"><i class="fa fa-table small-padding"></i> {{'EDIT_COLS' | translate}}</span>
                                        </button>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="add-info">{{'ADDITIONAL_INFO' | translate}}</label><span class="icon-ic_help_outline_black help_icon" aria-hidden="true" uib-tooltip="{{'ADDITIONAL_INFO_COLUMN_HELP' | translate}}"></span>
                                    <div ng-show="vm.t2mSvc.geometryType">
                                        <select class="form-control inline-select" id="add-info" ng-model="vm.t2mSvc.additionalInfo" ng-options="info for info in vm.t2mSvc.geometryType.additionalInfo" ng-change="vm.t2mSvc.layerDataChanged(true)"
                                            ng-disabled="!vm.t2mSvc.geometryType || vm.t2mSvc.geometryType.additionalInfo.length < 1"></select>

                                    </div>
                                </div>
                            </div>
                            <div class="row border-bottom">
                                <div class="collapsed" data-toggle="collapse" data-target="#designSettings" aria-expanded="false" aria-controls="designSettings">
                                    <label class="pointer">{{'DESIGN_OF_OBJECTS' | translate}}
                                        <span class="fa fa-caret-up"></span>
                                        <span class="fa fa-caret-down"></span>
                                    </label>
                                </div>
                            </div>
                            <div class="collapse" id="designSettings">
                                <div class="row">
                                    <div class="col-sm-6 form-group no-padding">
                                        <label for="f-icon">{{'ICON_IMAGE' | translate}}<span class="icon-ic_help_outline_black help_icon" aria-hidden="true" uib-tooltip="{{'UPLOAD_ICON_HELP' | translate}}"></span></label>
                                        <div id="f-icon">
                                            <label class="file-upload-label btn t2m-btn t2m-btn-lg yellow" for="icon-upload" style="width: 172px"><i class="fa fa-picture-o small-padding" aria-hidden="true"></i><span>{{ 'UPLOAD_ICON' | translate}}</span>
                                                <input type="file" accept="image/png" id="icon-upload" style="margin-top:8px" />
                                            </label>
                                            <img class="grey-border" id="iconImage" ng-src="{{vm.t2mSvc.iconData}}" />
                                        </div>
                                    </div>
                                    <div class="col-sm-6 form-group">
                                        <label for="f-fill-col">{{'FILL_COLOR' | translate}}</label>
                                        <div id="f-fill-col">
                                            <spectrum-colorpicker name="fill-col" data-ng-model="vm.t2mSvc.featureType.style['fillColor']" options="{ cancelText: 'Cancel', chooseText: 'OK', preferredFormat: 'hex', showInput: true }"></spectrum-colorpicker>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="f-default-style">{{'DEFAULT_STYLE_PROPERTY' | translate}}</label>
                                    <div>
                                        <select id="f-default-style" class="form-control full-width inline-select" ng-model="vm.t2mSvc.defaultLegendProperty" ng-options="hdr.code as hdr.title for hdr in vm.t2mSvc.headerCollection"></select>
                                        <span class="icon-sluit t2mclose" ng-click="vm.t2mSvc.clearLegendProperty()"></span>
                                    </div>
                                </div>
                                <div class="collapse" id="advancedIconSettings">
                                    <div class="form-group">
                                        <label for="iconDimensions">{{'ICON_DIMENSIONS' | translate}}</label>
                                        <div id="iconDimensions">
                                            <div class="row">
                                                <div class="col-sm-6 form-group">
                                                    <label for="iconHeight">{{'ICON_HEIGHT' | translate}}</label>
                                                    <input type="number" min="0" max="320" name="iconHeight" data-ng-model="vm.t2mSvc.featureType.style['iconHeight']" class="form-control"
                                                        ng-disabled="vm.t2mSvc.featureType.style['drawingMode'] != 'Point'">
                                                </div>
                                                <div class="col-sm-6 form-group">
                                                    <label for="iconWidth">{{'ICON_WIDTH' | translate}}</label>
                                                    <input type="number" min="0" max="320" name="iconWidth" data-ng-model="vm.t2mSvc.featureType.style['iconWidth']" min="0"
                                                        class="form-control" ng-disabled="vm.t2mSvc.featureType.style['drawingMode'] != 'Point'">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-6 form-group">
                                                    <label for="transparency">{{'TRANSPARENCY' | translate}}</label>
                                                    <input type="number" step="5" min="0" max="100" name="transparency" ng-change="vm.t2mSvc.featureType.style['strokeOpacity']=vm.t2mSvc.featureType.style['opacity'];vm.t2mSvc.featureType.style['fillOpacity']=vm.t2mSvc.featureType.style['opacity']"
                                                        ng-model="vm.t2mSvc.featureType.style['opacity']" transparency-to-opacity class="form-control">
                                                </div>
                                                <div class="col-sm-6 form-group">
                                                    <label for="corner-radius">{{'CORNER_RADIUS' | translate}}</label>
                                                    <input type="number" name="corner-radius" data-ng-model="vm.t2mSvc.featureType.style['cornerRadius']" class="form-control"
                                                        ng-disabled="vm.t2mSvc.featureType.style['drawingMode'] != 'Point'">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-6 form-group">
                                                    <label for="stroke-col">{{'STROKE_COLOR' | translate}}</label>
                                                    <div>
                                                        <spectrum-colorpicker name="stroke-col" data-ng-model="vm.t2mSvc.featureType.style['strokeColor']" options="{cancelText: 'Cancel', chooseText: 'OK', preferredFormat: 'hex', showInput: true}"></spectrum-colorpicker>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 form-group">
                                                    <label for="stroke-w">{{'STROKE_WIDTH' | translate}}</label>
                                                    <input type="number" name="stroke-w" min="0" max="32" data-ng-model="vm.t2mSvc.featureType.style['strokeWidth']" class="form-control">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-6 form-group">
                                                    <label for="sel-stroke-col">{{'SELECTED_STROKE_COLOR' | translate}}</label>
                                                    <div>
                                                        <spectrum-colorpicker name="sel-stroke-col" data-ng-model="vm.t2mSvc.featureType.style['selectedStrokeColor']" options="{cancelText: 'Cancel', chooseText: 'OK', preferredFormat: 'hex', showInput: true}"></spectrum-colorpicker>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 form-group">
                                                    <label for="sel-stroke-w">{{'SELECTED_STROKE_WIDTH' | translate}}</label>
                                                    <input type="number" name="sel-stroke-w" min="0" max="32" data-ng-model="vm.t2mSvc.featureType.style['selectedStrokeWidth']"
                                                        class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-sm-6 form-group" style="padding-left:1px">
                                                <label for="clusterToggle">{{'CLUSTERING' | translate}}</label>
                                                <div class="zodk-checkbox" id="clusterToggle">
                                                    <input type="checkbox" id="clustering" data-ng-model="vm.t2mSvc.clusterOptions.clustering" ng-disabled="vm.t2mSvc.featureType.style['drawingMode'] != 'Point'" style="width:16px;">
                                                    <label for="clustering"></label>
                                                    <div class="zodk-checkbox-text" uib-tooltip="{{'CLUSTER_TOGGLE' | translate}}">
                                                        {{'CLUSTER_TOGGLE' | translate}}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-6 form-group">
                                                <label for="clusterLevel">{{'CLUSTER_LEVEL' | translate}}</label>
                                                <input type="number" id="clusterLevel" data-ng-model="vm.t2mSvc.clusterOptions.clusterLevel" min="0" max="24" class="form-control"
                                                    ng-disabled="vm.t2mSvc.featureType.style['drawingMode'] != 'Point'">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div data-toggle="collapse" data-target="#advancedIconSettings" aria-expanded="false" aria-controls="advancedIconSettings">
                                        <label class="pointer">{{'ADVANCED_SETTINGS' | translate}}
                                            <span class="fa fa-caret-up"></span>
                                            <span class="fa fa-caret-down"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="col-sm-4 wizard-width-limit pull-right" ng-show="vm.t2mSvc.rowCollection.length > 0">
                        <div class="row no-margin" style="max-width: 400px;">
                            <h4>{{'STYLE_PREVIEW' | translate}}</h4>
                            <div class="form-group">
                                <label for="select-preview-f-2">{{'SELECT_FEATURE_TO_PREVIEW' | translate}}</label>
                                <select class="form-control" id="select-preview-f-2" ng-options="vm.t2mSvc.rowCollection.indexOf(row) as row[vm.t2mSvc.featureType.style.nameLabel] for row in vm.t2mSvc.rowCollection"
                                    ng-model="vm.t2mSvc.selectedRowIndex" ng-change="vm.t2mSvc.selectRowIndex(vm.t2mSvc.selectedRowIndex)"></select>
                            </div>
                        </div>
                        <div class="row">
                            <label style="font-size: 14px;">{{'CURRENT_ZOOM' | translate}}: {{vm.t2mSvc.currentZoom}}</label>
                            <span style="float: right">
                                <label style="font-size: 14px;" ng-show="vm.t2mSvc.feature.isSelected">{{'FEATURE_SELECTED' | translate}}</label>
                                <label style="font-size: 14px;" ng-hide="vm.t2mSvc.feature.isSelected">{{'FEATURE_DESELECTED' | translate}}</label>
                            </span>
                            <div id="previewMap"></div>
                        </div>
                    </div>
                </div>
                <!-- PROPERTY TYPES -->
                <div class="row" ng-show="vm.t2mSvc.currentStep === 5" id="step5">
                    <h4 ng-hide="vm.t2mSvc.rowCollection.length > 0">{{'NO_DATA_TABLE' | translate}}</h4>
                    <div ng-show="vm.t2mSvc.rowCollection.length > 0" class="col-xs-8 col-lg-7 wizard-width-limit">
                        <form id="propertySettingsForm">
                            <div class="form-group form-header">
                                <h4>{{'PROPERTY_SETTINGS' | translate}}
                                    <span class="icon-ic_help_outline_black help_icon" aria-hidden="true" uib-tooltip="{{'PROPERTY_SETTINGS_HELP' | translate}}"></span>
                                </h4>
                            </div>
                            <!--<div class="form-group larger-font bold">
                                <label for="p-title">{{'SELECTED_PROPERTY' | translate}}</label>
                                <div ng-show="vm.t2mSvc.pType.title">{{vm.t2mSvc.pType.title}}</div>
                                <div ng-hide="vm.t2mSvc.pType.title">{{'NO_PROPERTY_SELECTED' | translate}}</div>
                            </div>-->
                            <div class="form-group">
                                <label for="p-selectprop">{{'SELECTED_PROPERTY' | translate}}</label>
                                <select class="form-control" id="p-selectprop" ng-options="prop.label as prop.title for prop in vm.t2mSvc.featureType._propertyTypeData"
                                    ng-model="selectedProperty" ng-change="vm.selectProperty(selectedProperty)"></select>
                            </div>
                            <div class="form-group">
                                <label for="p-title">{{'TITLE' | translate}}</label>
                                <input type="text" data-ng-model="vm.t2mSvc.pType.title" class="form-control" />
                            </div>
                            <div class="form-group">
                                <label for="p-description">{{'DESCRIPTION' | translate}}</label>
                                <input type="text" id="p-description" data-ng-model="vm.t2mSvc.pType.description" data-ng-change="vm.t2mSvc.updatePropertyPreview()"
                                    class="form-control" />
                            </div>
                            <div class="form-group">
                                <label for="p-type">{{'TYPE' | translate}}</label>
                                <select data-ng-model="vm.t2mSvc.pType.type" id="p-type" ng-options="type as name for (type, name) in propertyTypeTypes"
                                    class="form-control" />
                            </div>
                            <div class="form-group">
                                <label for="p-visibility">{{'VISIBILITY' | translate}}</label>
                                <div class="row">
                                    <div class="zodk-checkbox">
                                        <div class="col-xs-6 no-padding">
                                            <input type="checkbox" data-ng-model="vm.t2mSvc.pType.visibleInCallOut" id="p-callout" />
                                            <label for="p-callout"></label>
                                            <div class="zodk-checkbox-text">
                                                {{'VISIBLE_IN_CALLOUT' | translate}}<span class="icon-ic_help_outline_black help_icon" aria-hidden="true" uib-tooltip="{{'CALLOUT_HELP' | translate}}"></span>
                                            </div>
                                        </div>
                                        <div class="col-xs-6 no-padding">
                                            <input type="checkbox" data-ng-model="vm.t2mSvc.pType.visibleInTooltip" id="p-tooltip" />
                                            <label for="p-tooltip"></label>
                                            <div class="zodk-checkbox-text">
                                                {{'VISIBLE_IN_TOOLTIP' | translate}}<span class="icon-ic_help_outline_black help_icon" aria-hidden="true" uib-tooltip="{{'TOOLTIP_HELP' | translate}}"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row border-bottom">
                                <div class="collapsed" data-toggle="collapse" data-target="#advancedPropSettings" aria-expanded="false" aria-controls="advancedPropSettings">
                                    <label class="pointer">{{'ADVANCED_SETTINGS' | translate}}
                                        <span class="fa fa-caret-up"></span>
                                        <span class="fa fa-caret-down"></span>
                                    </label>
                                </div>
                            </div>
                            <div class="collapse" id="advancedPropSettings">
                                <div class="form-group">
                                    <label for="p-sf">{{'STRINGFORMAT' | translate}}</label>
                                    <select data-ng-model="vm.t2mSvc.pType.stringFormat" id="p-sf" ng-options="entry.val as entry.name for entry in stringFormats" data-ng-change="vm.t2mSvc.updatePropertyPreview()"
                                        class="form-control" ng-disabled="vm.t2mSvc.pType.type !== 'number'" />
                                </div>
                                <div class="form-group">
                                    <label for="p-section">{{'SECTION' | translate}}</label>
                                    <ui-select select-section-on-blur object-to-value ng-model="vm.t2mSvc.pType.section" ng-blur="vm.t2mSvc.checkSections()"
                                        ng-keyup="$event.keyCode == 13 && vm.t2mSvc.checkSections()">
                                        <ui-select-match placeholder="{{'SELECT_OR_CREATE_SECTION' | translate}}">
                                            <span ng-bind="$select.selected.name"></span>
                                        </ui-select-match>
                                        <ui-select-choices repeat="section in vm.t2mSvc.sections | filter: $select.search track by section.name">
                                            <span ng-bind="section.name"></span>
                                        </ui-select-choices>
                                    </ui-select>
                                    <!--<div class="input-group">
                                    <input class="form-control" type="text" list="sections" data-ng-model="vm.t2mSvc.pType.section" ng-keyup="$event.keyCode == 13 && vm.t2mSvc.checkSections()"
                                        ng-blur="vm.t2mSvc.checkSections()">
                                    <datalist id="sections">
                                        <option ng-repeat="section in vm.t2mSvc.sections" value="{{section}}"></option>
                                    </datalist>
                                    <span class="input-group-btn" ng-click="vm.t2mSvc.pType.section = '';vm.t2mSvc.updatePropertyPreview()"><button class="btn btn-default" uib-tooltip="{{'CLEAR' | translate}}"><i class="fa fa-times"></i></button></span>
                                </div>-->
                                </div>
                                <div class="form-group">
                                    <label for="p-range">{{'DATA_RANGE' | translate}}</label>
                                    <div class="form-inline">
                                        <div class="row">
                                            <div class="col-xs-6 no-padding">
                                                <label for="p-min">{{'STATS.MIN' | translate}}</label>
                                                <input type="number" class="form-control" data-ng-model="vm.t2mSvc.pType.min" id="p-min" style="max-width:100%"/>
                                            </div>
                                            <div class="col-xs-6 no-padding">
                                                <label for="p-max">{{'STATS.MAX' | translate}}</label>
                                                <input type="number" class="form-control" data-ng-model="vm.t2mSvc.pType.max" id="p-max" style="max-width:100%"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="p-autofill-all">{{'AUTODETECT_TYPES' | translate}}

                                       <span class="icon-ic_help_outline_black help_icon" aria-hidden="true" uib-tooltip="{{'AUTODETECT_TYPES_HELP' | translate}}"></span></label>
                                    <div class="form-inline">
                                        <div class="row">
                                            <div class="col-xs-12 no-padding">
                                                <button class="btn btn-default" ng-click="vm.t2mSvc.generateFeatureType(true)" style="min-width: 64px;"><i class="fa fa-magic"></i></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- <div class="row">
                                <div class="btn t2m-btn t2m-btn-lg yellow" ng-click="vm.t2mSvc.convertAndOpen()">
                                    <i class="fa fa-map-o"></i> {{'SAVE_AND_OPEN' | translate}}
                                </div>
                            </div> -->
                        </form>
                    </div>
                    <div class="col-xs-5 col-lg-4 pull-right" ng-show="vm.t2mSvc.rowCollection.length > 0">
                        <div class="row">
                            <div class="form-group">
                                <label for="select-preview-f">{{'SELECT_FEATURE_TO_PREVIEW' | translate}}</label>
                                <select class="form-control" id="select-preview-f" ng-options="vm.t2mSvc.rowCollection.indexOf(row) as row[vm.t2mSvc.featureType.style.nameLabel] for row in vm.t2mSvc.rowCollection"
                                    ng-model="vm.t2mSvc.selectedRowIndex" ng-change="vm.t2mSvc.selectRowIndex(vm.t2mSvc.selectedRowIndex)"></select>
                            </div>
                        </div>
                        <div class="row">
                            <rightpanelpreview style="text-align: left;"></rightpanelpreview>
                        </div>
                    </div>
                </div>
                <!-- UPLOAD-PAGE -->
                <div class="row" ng-show="vm.t2mSvc.currentStep === 6">
                    <div class="col-sm-12 fill-height wizard-width-limit">
                        <div class="row">
                            <div class="col-sm-12">
                            <h4>{{'GENERATE_MAP' | translate}}</h4>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <div>{{'LAST_STEP_MSG' | translate}}</div>
                            </div>
                        </div>
                        <div class="row small-margin-top">
                            <div class="col-xs-12">
                                <div id="t2m-convert-button" class="btn t2m-btn t2m-btn-lg yellow" style="min-width: 200px" ng-click="vm.t2mSvc.convertOnly()" ng-disabled="(dropBox.$invalid||projectSettingsForm.$invalid||LayerSettingsOldForm.$invalid||!vm.t2mSvc.geometryInfoComplete)">
                                    <i class="fa fa-cogs"></i> {{'CONVERT' | translate}}
                                </div>
                            </div>
                        </div>

                        <div class="row small-margin-top" ng-show="vm.t2mSvc.conversionReady&&!vm.t2mSvc.notFoundLocations">
                            <div class="col-xs-12">
                                <div class="zodk-notification-box text-success" >
                                    <i class="fa fa-check"></i> {{'DATA_CONVERTED_CORRECTLY' | translate}}
                                </div>
                            </div>
                        </div>
                        <div class="row small-margin-top" ng-show="vm.t2mSvc.notFoundLocations">
                            <div class="col-xs-12">
                                <div class="zodk-notification-box text-danger pointer" ng-click="vm.showMissingLocations()">
                                    <i class="fa fa-exclamation-triangle"></i>{{'DATA_NOT_CONVERTED_CORRECTLY' | translate}}
                                </div>
                            </div>
                        </div>
                        <div class="row small-margin-top">
                            <div class="col-xs-12">
                                <div class="btn t2m-btn t2m-btn-lg yellow" style="min-width: 200px" ng-click="vm.t2mSvc.openProject()" ng-disabled="!vm.t2mSvc.conversionReady">
                                    <i class="fa fa-map-o"></i> {{'OPEN_RESULT' | translate}}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="fixed-widget-footer">
        <div class="row">
            <div class="col-sm-4 col-md-3 col-lg-2"></div>
            <div class="col-sm-8 col-md-9 col-lg-10">
                <div class="row">
                    <div class="col-sm-12 zodk-next-step">
                        <div class="pointer t2m-btn next-button" ng-click="vm.t2mSvc.nextStep()"  ng-hide="vm.t2mSvc.currentStep>=vm.t2mSvc.numberOfSteps">
                            {{'NEXT_STEP' | translate}}
                        </div>
                    </div>
                    <!-- <div class="col-sm-4 zodk-next-step">
                        <div class="btn t2m-btn yellow" ng-click="vm.t2mSvc.convertAndOpen()" ng-disabled="(dropBox.$invalid||projectSettingsForm.$invalid||LayerSettingsOldForm.$invalid||!vm.t2mSvc.geometryInfoComplete)">
                            <i class="fa fa-map-o"></i> {{'SAVE_AND_OPEN' | translate}}
                        </div>
                    </div> -->
                </div>
            </div>
        </div>
    </div>
</div>
