<div class="data-table">
    <div class="closeicon pointer" ng-click="vm.returnToMap()">
        <img height="16px" src="images/sluit.svg">
    </div>
    <div class="row">
        <div class="col-xs-12">
            <h2>{{'TABLE_LABEL' | translate}}</h2>
        </div>
    </div>
    <div class="row navigation">
        <div class="col-xs-6 col-sm-4 col-md-3 col-lg-2 datatable-top-row-height">
            <!-- Pull down of map layers -->
            <select id="layerSelection" data-ng-model="vm.selectedLayerId" data-ng-change="vm.loadLayer()" data-ng-options="layer.id as layer.title group by layer.group for layer in vm.layerOptions"
                class="form-control tt-input"></select>
        </div>


        <!-- Right side of the table view -->
        <div class="col-xs-6 col-sm-8 col-md-9 col-lg-10 datatable-top-row-height" ng-init="poiTypeFilter" ng-show="vm.selectedLayerId != vm.mapLabel">
            <div class="row">
                <div class="col-xs-5 col-sm-4 col-md-3 no-padding">
                    <!-- Filter -->
                    <div class="datatable-top-row-height datatable-filter">
                        <div class="datatable-top-row-height datatable-filter">
                            <input id="searchbox" data-ng-model="featureFilter" type="text" placeholder="Filter" autocomplete="off" spellcheck="false" class="form-control tt-input">

                            <span id="searchicon" class=" form-control-feedback  searchicon">
                                <img height="15px" src="images/filter.svg">
                            </span>
                        </div>
                    </div>
                </div>

                <div class="col-xs-7 col-sm-8 col-md-9 no-padding-right" style="">
                    <!--Download to CSV option-->
                    <div class="datatable-top-row-height datatable-download datatable-download-large">
                        <div class="datatable-download-text">
                            <i class="zodk-ico-downloaden"></i>{{'DOWNLOAD_SELECTION_AS' | translate}}<span data-ng-click="vm.downloadCsv()" class="csv">CSV</span>
                            <span data-ng-click="vm.downloadGeoJson()"" class="json">GeoJSON</span>
                        </div>
                    </div>
                    <div class="datatable-top-row-height datatable-download datatable-download-small">
                        <div class="datatable-download-text">
                            <i class="zodk-ico-downloaden"></i><span data-ng-click="vm.downloadCsv()">CSV</span>
                            <span data-ng-click="vm.downloadGeoJson()">GeoJSON</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-xs-6 col-sm-4 col-md-3 col-lg-2 no-padding">
            <!-- Select/deselect all -->
            <ul class="form-group datatable-padding-left">
                <li class="list-unstyled datatable-select-all zodk-checkbox">
                    <input type="checkbox" id="selectAll" name="selectAll" value="{{vm.selectAllText}}" data-ng-checked="vm.selectAllBool" data-ng-click="vm.selectAll()"
                    />
                    <label for="selectAll"></label>
                    <div class="title">{{vm.selectAllText}}</div>
                </li>
            </ul>
            <!-- List of headers -->
            <ul class="form-group datatable-grey datatable-padding-left" resize resize-y="220" ng-show="vm.selectedLayerId != vm.mapLabel">
                <!-- PropertyTypes -->
                <li ng-repeat="mi in vm.propertyTypes" class="list-unstyled zodk-checkbox">
                    <input type="checkbox" id="checkbox-{{$index}}" name="vm.selectedTitles[]" value="{{mi.title}}" data-ng-checked="vm.headers.indexOf(mi.title) > -1"
                        data-ng-click="vm.toggleSelection(mi.title)" />
                    <label for="checkbox-{{$index}}" ng-class="{'datatable-propertytype-admin': !mi.visibleInCallOut}"></label>
                    <div class="title">{{mi.title}}</div>

                </li>
                <!-- Empty space to prevent items hiding under timeline -->
                <li class="list-unstyled" style="margin-bottom: 30px" />
            </ul>
        </div>

        <div class="col-xs-6 col-sm-8 col-md-9 col-lg-10">

            <!-- Data table -->
            <div>
                <table class="table table-striped table-condensed" id="cs-data-table">
                    <tr>
                        <th data-ng-repeat="header in vm.headers track by $index">
                            {{header}}
                            <a data-ng-click="$parent.reverseSort = !$parent.reverseSort; $parent.sortIndex = $index; vm.orderBy($parent.sortIndex, $parent.reverseSort);"><i data-ng-class="vm.sortOrderClass($index, $parent.reverseSort)"></i></a>
                        </th>
                    </tr>
                    <tr dir-paginate="row in vm.rows | filterRows:featureFilter | itemsPerPage: vm.numberOfItems" fit-rows rowheight="32" tablepadding="300">
                        <td data-ng-class="{'text-right': field.type == 'number'}" data-ng-repeat="field in row track by $index">
                            <div ng-switch="field.type">
                                <a ng-switch-when="bbcode" ng-href="{{field.displayValue}}" data-ng-bind-html="vm.toTrusted(field.displayValue)" target="_blank"></a>
                                <div ng-switch-default data-ng-bind-html="vm.toTrusted(field.displayValue)"></div>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>

            <dir-pagination-controls max-size="10" boundary-links="true" boundary-link-numbers="true" rotate="true" direction-links="true" next-text="{{'NEXT' | translate}}" previous-text="{{'PREVIOUS' | translate}}"></dir-pagination-controls>
        </div>
    </div>
</div>
